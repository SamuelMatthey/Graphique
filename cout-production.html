<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Coût de production vs prix d'importation</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=DM+Sans:wght@400;500;700&display=swap');
  *{margin:0;padding:0;box-sizing:border-box}
  body{background:#0d1117;color:#c8d6e5;font-family:'DM Sans',system-ui,sans-serif;min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:2rem 1rem}
  .wrap{width:100%;max-width:1100px;background:linear-gradient(145deg,#0d1117,#111820);border:1px solid #1a2030;border-radius:16px;padding:2rem;box-shadow:0 8px 40px rgba(0,0,0,.5);animation:fadeIn .8s ease-out}
  @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
  .surtitle{font-family:'JetBrains Mono',monospace;font-size:.7rem;color:#f9ca24;font-weight:700;letter-spacing:.12em;text-transform:uppercase;margin-bottom:.4rem}
  .title{font-size:1.4rem;font-weight:700;color:#fff;margin-bottom:.35rem}
  .subtitle{font-size:.82rem;color:#5a6a7a;margin-bottom:1.5rem}
  svg{width:100%;height:auto;display:block}
  .tooltip-box{position:absolute;pointer-events:none;background:rgba(13,17,23,.95);border:1px solid #1a2030;border-radius:8px;padding:12px 16px;font-size:12px;color:#c8d6e5;white-space:nowrap;z-index:10;opacity:0;transition:opacity .15s;box-shadow:0 4px 20px rgba(0,0,0,.4)}
  .tooltip-box.visible{opacity:1}
  .tt-title{font-family:'JetBrains Mono',monospace;font-weight:700;color:#fff;margin-bottom:6px;font-size:13px}
  .tt-row{display:flex;align-items:center;gap:8px;margin:3px 0}
  .tt-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
  .tt-sep{border-top:1px solid #1a2030;margin:6px 0}
  .legend{display:flex;flex-wrap:wrap;gap:1.2rem;margin-top:1rem}
  .legend-item{display:flex;align-items:center;gap:6px;font-size:.8rem;color:#7a8ba3}
  .legend-color{width:14px;height:3px;border-radius:2px}
  .stats{display:flex;gap:1rem;margin-top:1.2rem;flex-wrap:wrap}
  .stat{background:rgba(255,255,255,.03);border:1px solid #1a2030;border-radius:10px;padding:.8rem 1.2rem;flex:1;min-width:160px}
  .stat-label{font-size:.7rem;color:#5a6a7a;text-transform:uppercase;letter-spacing:.08em;margin-bottom:.25rem;font-family:'JetBrains Mono',monospace}
  .stat-val{font-size:1.2rem;font-weight:700;font-family:'JetBrains Mono',monospace}
  .green{color:#7bed9f}.cyan{color:#4ecdc4}.red{color:#ff6b6b}
  .chart-area{position:relative}
  @media(max-width:768px){.wrap{padding:1.2rem;border-radius:10px}.title{font-size:1.1rem}.stat{min-width:130px;padding:.6rem .8rem}.stat-val{font-size:1rem}body{padding:1rem .5rem}}
</style>
</head>
<body>
<div class="wrap">
  <div class="surtitle">Coût moyen de production vs prix d'importation</div>
  <div class="title">Avantage compétitif du mix suisse avec nouveau nucléaire</div>
  <div class="subtitle">Coût pondéré : hydraulique 20 • nucléaire existant 25 • renouvelables 12–15 • EPR2 40 • Transmutex 52 CHF/MWh</div>
  <div class="chart-area" id="chartArea">
    <svg id="chart" viewBox="0 0 1060 380"></svg>
    <div class="tooltip-box" id="tooltip"></div>
  </div>
  <div class="legend">
    <div class="legend-item"><div class="legend-color" style="background:#4ecdc4"></div>Coût moyen de production suisse</div>
    <div class="legend-item"><div class="legend-color" style="background:#ff6b6b"></div>Prix import estimé</div>
    <div class="legend-item"><div class="legend-color" style="background:#7bed9f;height:10px;opacity:.3"></div>Avantage compétitif</div>
  </div>
  <div class="stats">
    <div class="stat"><div class="stat-label">Coût production 2026</div><div class="stat-val cyan">21 CHF/MWh</div></div>
    <div class="stat"><div class="stat-label">Coût production 2060</div><div class="stat-val cyan">28 CHF/MWh</div></div>
    <div class="stat"><div class="stat-label">Prix import 2060</div><div class="stat-val red">110 CHF/MWh</div></div>
    <div class="stat"><div class="stat-label">Avantage compétitif</div><div class="stat-val green">82 CHF/MWh</div></div>
  </div>
</div>
<script>
(function(){
const SY=2026,EY=2106,N=EY-SY+1;
const M={l:55,r:20,t:15,b:35},W=1060,H=380,pw=W-M.l-M.r,ph=H-M.t-M.b,YMAX=130;
function xP(i){return M.l+i/(N-1)*pw}
function yP(v){return M.t+(1-v/YMAX)*ph}
function hydro(y){return y<=2050?48+2*(y-2026)/24:50}
function nucEx(y){let t=0;if(y<2033)t+=6;else if(y<2034)t+=6*(2034-y);if(y<2039)t+=8;else if(y<2040)t+=8*(2040-y);if(y<2044)t+=9;else if(y<2045)t+=9*(2045-y);return t}
function renouv(y){if(y<=2026)return 9;if(y<=2035)return 9+5*(y-2026)/9;if(y<=2055)return 14+6*(y-2035)/20;return 20}
function up(mw){return mw/1e3*.85*8.76}
const eu=[{s:2038,m:1670},{s:2040,m:1670}],tu=[{s:2048,m:300},{s:2048,m:300},{s:2050,m:300},{s:2050,m:300}];
function epr2(y){let p=0;eu.forEach(u=>{if(y>=u.s){let o=y-u.s;if(o<=80)p+=up(u.m)*Math.min(1,o/2)}});return p}
function tmx(y){let p=0;tu.forEach(u=>{if(y>=u.s){let o=y-u.s;if(o<=80)p+=up(u.m)*Math.min(1,o/2)}});return p}
function coutRN(y){return y<=2040?65:y<=2055?65-30*(y-2040)/15:y<=2070?35-20*(y-2055)/15:15}
function coutMoyen(y){let h=hydro(y),n=nucEx(y),r=renouv(y),e=epr2(y),t=tmx(y),tot=h+n+r+e+t;if(!tot)return 0;let ra=Math.min(r,9),rn=Math.max(0,r-9);return(h*20+n*25+ra*12+rn*coutRN(y)+e*40+t*52)/tot}
function prixImport(y){return 80+30*Math.min(1,Math.max(0,(y-2026)/34))}

const years=[],cP=[],pI=[];
for(let i=0;i<N;i++){let y=SY+i;years.push(y);cP.push(coutMoyen(y));pI.push(prixImport(y))}

const svg=document.getElementById('chart'),ns='http://www.w3.org/2000/svg';
function el(tag,a){let e=document.createElementNS(ns,tag);for(let k in a)e.setAttribute(k,a[k]);return e}

// Grid
for(let v=0;v<=YMAX;v+=20){let y=yP(v);svg.appendChild(el('line',{x1:M.l,x2:W-M.r,y1:y,y2:y,stroke:'#fff',opacity:.04}));let t=el('text',{x:M.l-8,y:y+4,'text-anchor':'end',fill:'#5a6a7a','font-size':10,'font-family':"'JetBrains Mono',monospace"});t.textContent=v;svg.appendChild(t)}
for(let y=2030;y<=2100;y+=10){let t=el('text',{x:xP(y-SY),y:H-M.b+20,'text-anchor':'middle',fill:'#5a6a7a','font-size':10,'font-family':"'JetBrains Mono',monospace"});t.textContent=y;svg.appendChild(t)}

// Gap fill between curves
let gapD='M';for(let i=0;i<N;i++)gapD+=(i?'L':'')+xP(i).toFixed(1)+','+yP(pI[i]).toFixed(1);
for(let i=N-1;i>=0;i--)gapD+='L'+xP(i).toFixed(1)+','+yP(cP[i]).toFixed(1);
gapD+='Z';
svg.appendChild(el('path',{d:gapD,fill:'#7bed9f',opacity:.07}));

// Production cost fill
let cfD='M';for(let i=0;i<N;i++)cfD+=(i?'L':'')+xP(i).toFixed(1)+','+yP(cP[i]).toFixed(1);
cfD+='L'+xP(N-1).toFixed(1)+','+yP(0).toFixed(1)+'L'+xP(0).toFixed(1)+','+yP(0).toFixed(1)+'Z';
svg.appendChild(el('path',{d:cfD,fill:'#4ecdc4',opacity:.08}));

// Lines
let cpPath='M',piPath='M';
for(let i=0;i<N;i++){cpPath+=(i?'L':'')+xP(i).toFixed(1)+','+yP(cP[i]).toFixed(1);piPath+=(i?'L':'')+xP(i).toFixed(1)+','+yP(pI[i]).toFixed(1)}
svg.appendChild(el('path',{d:cpPath,fill:'none',stroke:'#4ecdc4','stroke-width':2.5,'stroke-linejoin':'round'}));
svg.appendChild(el('path',{d:piPath,fill:'none',stroke:'#ff6b6b','stroke-width':2,'stroke-dasharray':'8,4','stroke-linejoin':'round'}));

// Écart annotation at 2060
let i60=2060-SY,x60=xP(i60),yT=yP(pI[i60]),yB=yP(cP[i60]);
svg.appendChild(el('line',{x1:x60,x2:x60,y1:yT+5,y2:yB-5,stroke:'#7bed9f',opacity:.5,'stroke-width':1.5}));
// Arrows
let arrT=el('polygon',{points:`${x60},${yT+3} ${x60-4},${yT+10} ${x60+4},${yT+10}`,fill:'#7bed9f',opacity:.6});svg.appendChild(arrT);
let arrB=el('polygon',{points:`${x60},${yB-3} ${x60-4},${yB-10} ${x60+4},${yB-10}`,fill:'#7bed9f',opacity:.6});svg.appendChild(arrB);
let ecart=Math.round(pI[i60]-cP[i60]);
let et=el('text',{x:x60+12,y:(yT+yB)/2+4,'text-anchor':'start',fill:'#7bed9f','font-size':12,'font-weight':'bold','font-family':"'DM Sans',sans-serif"});et.textContent='Écart : '+ecart+' CHF/MWh';svg.appendChild(et);

// Hover
let hL=el('line',{x1:0,x2:0,y1:M.t,y2:H-M.b,stroke:'#fff','stroke-width':1,'stroke-dasharray':'3,3',opacity:0});svg.appendChild(hL);
let d1=el('circle',{r:4,fill:'#4ecdc4',opacity:0}),d2=el('circle',{r:4,fill:'#ff6b6b',opacity:0});svg.appendChild(d1);svg.appendChild(d2);
const tip=document.getElementById('tooltip'),ca=document.getElementById('chartArea');
function show(e){let r=svg.getBoundingClientRect(),mx=(e.clientX-r.left)/r.width*W,idx=Math.round((mx-M.l)/pw*(N-1));if(idx<0||idx>=N){hide();return}idx=Math.max(0,Math.min(N-1,idx));
let x=xP(idx);hL.setAttribute('x1',x);hL.setAttribute('x2',x);hL.style.opacity='.15';
d1.setAttribute('cx',x);d1.setAttribute('cy',yP(cP[idx]));d1.style.opacity='1';
d2.setAttribute('cx',x);d2.setAttribute('cy',yP(pI[idx]));d2.style.opacity='1';
let ec=pI[idx]-cP[idx];
let h='<div class="tt-title">'+years[idx]+'</div>';
h+='<div class="tt-row"><div class="tt-dot" style="background:#4ecdc4"></div>Production: '+cP[idx].toFixed(0)+' CHF/MWh</div>';
h+='<div class="tt-row"><div class="tt-dot" style="background:#ff6b6b"></div>Import: '+pI[idx].toFixed(0)+' CHF/MWh</div>';
h+='<div class="tt-sep"></div><div class="tt-row">⚡ Avantage : '+ec.toFixed(0)+' CHF/MWh</div>';
tip.innerHTML=h;tip.classList.add('visible');
let tx=e.clientX-ca.getBoundingClientRect().left+15,ty=e.clientY-ca.getBoundingClientRect().top-50;if(tx+200>ca.offsetWidth)tx-=230;tip.style.left=tx+'px';tip.style.top=Math.max(0,ty)+'px'}
function hide(){hL.style.opacity='0';d1.style.opacity='0';d2.style.opacity='0';tip.classList.remove('visible')}
svg.addEventListener('mousemove',show);svg.addEventListener('mouseleave',hide);svg.addEventListener('touchmove',e=>{e.preventDefault();show(e.touches[0])},{passive:false});svg.addEventListener('touchend',hide);
})();
</script>
</body>
</html>

